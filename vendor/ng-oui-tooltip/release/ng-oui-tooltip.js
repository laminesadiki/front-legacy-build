/**
 * ng-oui-tooltip - v7.1.3 - 2015-03-24
 *
 * Copyright (c) 2015 Oodrive
 */
!function(a){!function(){a.module("oui.tooltip",["oo.i18n","oo.stringsUtils"])}(),function(){function b(a,b){return o?("function"==typeof a&&(b=a,a=null),void(a?(o.addClass("oo-displayed"),b&&b()):y.addClass(o,"oo-displayed").then(function(){b&&b()}))):!0}function c(a,b){o&&("function"==typeof a&&(b=a,a=null),a?(o.removeClass("oo-displayed oo-displayed-remove oo-displayed-remove-active oo-displayed-add oo-displayed-add-active"),b&&b()):y.removeClass(o,"oo-displayed").then(function(){b&&b()}))}function d(a,d){B=!1,C=!1,m(),l(),q.css({maxWidth:A.maxWidth||null,maxHeight:A.maxHeight||null,textAlign:A.textAlign||null}),o.addClass("oo-hidden"),b(!0),w.$broadcast("$tooltipReady",o,s),f(),c(!0),o.removeClass("oo-hidden"),j(a,d),o.css({left:v.pxToEm(z.pos.left,o)+"em",top:v.pxToEm(z.pos.top,o)+"em"}),b(function(){o.toggleClass("oo-vertical-overflow",q[0].offsetHeight+1<q[0].scrollHeight)}),B=!0,w.$digest()}function e(a,b){C&&!a||!B||(C=!0,c(a,function(){C&&(B=!1,C=!1,o.addClass("oo-hidden"),b&&b(),m())}),!a&&w.$digest())}function f(){z.width=o.width(),z.height=o.height(),z.halfWidth=z.width/2,z.halfHeight=z.height/2,z.smallWidth=0,z.bigWidth=0,z.smallHeight=0,z.bigHeight=0,G<z.halfWidth&&(z.smallWidth=G+D/2,z.bigWidth=z.width-z.smallWidth),H<z.halfHeight&&(z.smallHeight=H+D/2,z.bigHeight=z.height-z.smallHeight)}function g(a,b,c){switch(a){case"l":return c.left-(E+F)>z.width;case"r":return c.right-(E+F)>z.width;case"t":return c.top-(E+F)>z.height;case"b":return c.bottom-(E+F)>z.height}return!1}function h(a,b,c){var d=a.substring(0,1);if(!g(d,b,c))return!1;switch(a){case"l":case"r":return b.middleTop>z.halfHeight&&b.middleBottom>z.halfHeight;case"t":case"b":return b.middleRight>z.halfWidth&&b.middleLeft>z.halfWidth;case"tl":case"bl":return b.middleRight>z.smallWidth&&b.middleLeft>z.bigWidth;case"tr":case"br":return b.middleRight>z.bigWidth&&b.middleLeft>z.smallWidth;case"rt":case"lt":return b.middleTop>z.bigHeight&&b.middleBottom>z.smallHeight;case"rb":case"lb":return b.middleTop>z.smallHeight&&b.middleBottom>z.bigHeight}return!1}function i(a,b,c){var d={};return d.left=a.offset().left,d.top=a.offset().top,d.height=a.outerHeight(),d.width=a.outerWidth(),d.right=b-d.left-d.width,d.bottom=c-d.top-d.height,d.middleLeft=d.left+d.width/2,d.middleRight=d.right+d.width/2,d.middleTop=d.top+d.height/2,d.middleBottom=d.bottom+d.height/2,d}function j(a,b){var c,d=$(window).width(),e=$(window).height(),f=i(a,d,e),g=a!==b?i(b,d,e):f;for(c=0;c<A.pos.length;++c)if(h(A.pos[c],f,g))return void k(A.pos[c],f,g);k(A.pos[0],f,g)}function k(a,b,c){var d,e=a.substring(0,1);switch(e){case"r":z.pos.left=c.left+c.width+(E+F);break;case"b":z.pos.top=c.top+c.height+(E+F);break;case"l":z.pos.left=c.left-z.width-(E+F);break;case"t":z.pos.top=c.top-z.height-(E+F)}switch(a){case"r":z.pos.top=b.middleTop-z.halfHeight;break;case"b":z.pos.left=b.middleLeft-z.halfWidth;break;case"l":z.pos.top=b.middleTop-z.halfHeight;break;case"t":z.pos.left=b.middleLeft-z.halfWidth;break;case"rb":case"lb":z.pos.top=b.middleTop-z.smallHeight;break;case"rt":case"lt":z.pos.top=b.middleTop-z.bigHeight;break;case"br":case"tr":z.pos.left=b.middleLeft-z.smallWidth;break;case"bl":case"tl":z.pos.left=b.middleLeft-z.bigWidth}switch(a){case"r":case"l":d=z.halfHeight;break;case"b":case"t":d=z.halfWidth;break;case"rb":case"lb":d=z.smallHeight;break;case"rt":case"lt":d=z.bigHeight;break;case"br":case"tr":d=z.smallWidth;break;case"bl":case"tl":d=z.bigWidth}var f=!1;switch(e){case"r":r.attr("class","oo-arrow oo-arrow-left");break;case"b":r.attr("class","oo-arrow oo-arrow-top"),f=!0;break;case"l":r.attr("class","oo-arrow oo-arrow-right");break;case"t":r.attr("class","oo-arrow oo-arrow-bottom"),f=!0}f?(r.css("left",v.pxToEm(d-D/2,r)+"em"),r.css("top","")):(r.css("left",""),r.css("top",v.pxToEm(d-D/2,r)+"em"))}function l(){A.cls&&o.addClass(A.cls)}function m(){o.attr("class","oo-tooltip"+(B?" oo-displayed":""))}function n(b,c){var d=null,e=null,f=null,g=null,h=c;if(h)try{h=u(c)()}catch(i){}if(h&&(f=a.isObject(h)?h.id:h),f){if(e=$("#"+f),!e.length)return;d=e.data("$formController")||e.controller("ngModel")}else{if(e=b.closest("[ng-form],form"),!e.length)return;d=e.data("$formController")}if(d){if(h=h||{},e.closest("[oui-tooltip-error-i18n]").length)try{g=u(e.closest("[oui-tooltip-error-i18n]").attr("oui-tooltip-error-i18n"))(),g&&(h=a.extend(h,g))}catch(i){}var j="";for(var k in d.$error)if(d.$error[k]){var l=d;a.isArray(d.$error[k])&&(l=d.$error[k][0]);var m="i18n:oui.tooltip.error."+k;l&&l.defaultErrorMsg&&l.defaultErrorMsg[k]&&(m=l.defaultErrorMsg[k]),j+="<div>"+t("i18nOrText")(h[k]||m)+"</div>"}if(j)return j}}var o,p,q,r,s,t,u,v,w,x,y,z={},A={},B=!1,C=!1,D=12,E=6,F=2,G=30,H=30,I=["t","l","r","b","tl","tr","bl","br","lt","lb","rt","rb"],J=["t","l","r","b","tl","tr","bl","br","lt","lb","rt","rb"],K=null;a.module("oui.tooltip").run(["$filter","$parse","$ooConvert","$rootScope","$sce",function(a,b,c,d,e){t=a,u=b,v=c,w=d,x=e}]).provider("$tooltip",function(){var b=!1;this.defaultPosList=function(b){if("undefined"==typeof b)return J;if(b=a.isString(b)?b.replace(/(^[\s,]*|[\s,]*$)/g,"").split(/[,\s]+/):a.copy(b),!b[0])throw"Invalid tooltip position: empty";for(var c=0;c<b.length;++c)if(-1===I.indexOf(b[c]))throw"Invalid tooltip position: "+b[c];J=b},this.init=function(){if(!b){b=!0;var c=$("body");o=$('<div class="oo-tooltip oo-hidden"><div class="oo-tooltip-inner"><div class="oo-tooltip-inner-inner"></div></div><div class="oo-arrow"></div></div>'),c.append(o),z.margin=20,z.pos={left:0,top:0},p=o.find(".oo-tooltip-inner"),q=p.find(".oo-tooltip-inner-inner"),r=o.find(".oo-arrow"),c.on({mousewheel:e,DOMMouseScroll:e}),c.on("mouseenter","[oui-tooltip-text],[oui-tooltip-expr],[oui-tooltip-overflow],[oui-tooltip-id],[oui-tooltip-error]",function(){var b,c,e=$(this),f=e.attr("oui-tooltip-overflow"),g=e.attr("oui-tooltip-text"),h=e.attr("oui-tooltip-expr"),i=e.attr("oui-tooltip-id"),j=e.attr("oui-tooltip-error"),k=e.attr("oui-tooltip-cfg"),l=k?u(k)():{},m=l,o=a.extend({},l);if(o.pos){if(o.pos=o.pos.replace(/(^[\s,]*|[\s,]*$)/g,"").split(/[,\s]+/),!o.pos[0])throw o.pos=null,"Invalid tooltip position: empty";for(b=0;b<o.pos.length;++b)if(-1===I.indexOf(o.pos[b])&&("?"!==o.pos[b]||b!==o.pos.length-1))throw"Invalid tooltip position: "+o.pos[b];if("?"===o.pos[o.pos.length-1])for(o.pos=o.pos.splice(0,o.pos.length-1),b=0;b<J.length;++b)-1===o.pos.indexOf(J[b])&&o.pos.push(J[b])}else o.pos=a.copy(J);var p=this.offsetWidth<this.scrollWidth;if("undefined"==typeof f||p){if("undefined"!=typeof j)c=n(e,j);else if("undefined"!=typeof g)c=t("escapeHtml")(t("i18nOrText")(g),!1,!0);else if("undefined"!=typeof h){var r;if(h.match(/^[., _A-Za-z0-9-]+:/)){var v=h.indexOf(":");r=h.substring(0,v),h=h.substring(v+1)}var w=r?e.closest(r):e;if(w.length){var y;h.match(/^i:/)?(y=w.isolateScope(),h=h.substring(2)):y=w.scope(),c=y&&x.getTrustedHtml(y.$eval(h,{overflow:p})),o.textAlign=o.textAlign||"inherit"}}else"undefined"!=typeof i?(c=$("#"+i).html(),o.textAlign=o.textAlign||"inherit"):"undefined"!=typeof f&&(c=e.html());if(o.textAlign=o.textAlign||"center",o.target&&(e=e.find(o.target),0===e.length))throw"Couldn't find tooltip target '"+o.target+"'";var z=e;if(o.distTarget&&(z=z.find(o.distTarget),0===z.length))throw"Couldn't find tooltip target '"+o.distTarget+"'";c&&(s=m,A=o,q.html(c),d(e,z))}}),c.on("mouseleave","[oui-tooltip-text],[oui-tooltip-expr],[oui-tooltip-overflow],[oui-tooltip-id],[oui-tooltip-error]",function(){e(!1,function(){q.html("")}),A={}})}},K=this.init,this.$get=function(){return{hideTooltip:function(){e(!0,function(){q.html("")}),A={}}}}}).run(["$animate","$rootScope","$tooltip",function(a,b,c){y=a,K(),b.$on("oo.layoutReflow",function(){c.hideTooltip()})}])}()}(angular);
