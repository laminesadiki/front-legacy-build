/**
 * ng-oui-router - v4.0.0 - 2014-11-05
 *
 * Copyright (c) 2014 Oodrive
 */
!function(a){!function(){var b=[["@1"],["@1","sp"],["@1","sp","spp"]],c=[["@1"],["@1","@2"],["@1","@2","sp"],["@1","@2","sp","spp"],["sp"],["sp","spp"]],d=!1,e=function(b){var c;if(a.isArray(b))for(var e=0;e<b.length;++e)"&"===b[e][0]&&(c=parseInt(b[e].substring(1),10),b[e]="@"+((d?1:2)+c));else{d?("undefined"!=typeof b.wsId&&delete b.wsId,"undefined"!=typeof b.pageId&&(b["@1"]=b.pageId,delete b.pageId)):("undefined"!=typeof b.wsId&&(b["@1"]=b.wsId,delete b.wsId),"undefined"!=typeof b.pageId&&(b["@2"]=b.pageId,delete b.pageId)),"undefined"!=typeof b.spId&&(b.sp=b.spId,delete b.spId),"undefined"!=typeof b.spPageId&&(b.spp=b.spPageId,delete b.spPageId);for(var f in b)"&"===f[0]&&(c=parseInt(f.substring(1),10),b["@"+((d?1:2)+c)]=b[f],delete b[f])}return b},f=function(a){d?"undefined"!=typeof a["@1"]&&(a.pageId=a["@1"]):("undefined"!=typeof a["@1"]&&(a.wsId=a["@1"]),"undefined"!=typeof a["@2"]&&(a.pageId=a["@2"])),"undefined"!=typeof a.sp&&(a.spId=a.sp),"undefined"!=typeof a.spp&&(a.spPageId=a.spp);for(var b in a)if("@"===b[0]){var c=parseInt(b.substring(1),10);c>(d?1:2)&&(a["&"+(c-(d?1:2))]=a[b])}return a};a.module("oui.router",["oo.router"]).config(["$ooRouterProvider",function(a){a.globals(["lang","theme"]),a.basicnav(c)}]).provider("$ouiRouter",["$ooRouterProvider",function(g){var h=this,i=[];this.locationChange=g.locationChange;var j=g.addParams;this.addParams=function(b,c){var d={nav:b,params:c};return i.push(d),b=e(a.copy(b)),d=e(a.copy(c)),j.apply(h,[b,d])},this.singleWorkspace=function(f){if(!a.isDefined(f))return d;if(f!==d){d=f,g.basicnav(d?b:c),g.clearParams();for(var k=0;k<i.length;++k){var l=e(a.copy(i[k].nav)),m=e(a.copy(i[k].params));j.apply(h,[l,m])}}},this.$get=["$ooRouter","$rootScope",function(b,c){var g=a.copy(b);g.singleWorkspace=function(){return d};var h=g.goTo;g.goTo=function(a){return e(a),h.apply(g,arguments)},g.reloadToHome=function(){g.locationChange(!1),window.location=g.getHomeUrl(window.location),window.location.reload()};var i=g.getNav;g.getNav=function(){var b=a.copy(i());return f(b),b};var j=g.addCallback;return g.addCallback=function(b,c,d,h,i){!b||"$$watchers"in b||(i=h,h=d,d=c,c=b,b=null),c=e(a.copy(c)),d=e(a.copy(d));var k=function(b){h(f(a.copy(b)))};return j.apply(g,[b,c,d,k,i])},c.$on("$routerNavChange",function(b,d){if(!b.defaultPrevented){var e=a.copy(d);return f(e),c.$broadcast("$ouiRouterNavChange",d)?!0:(b.preventDefault(),!1)}}),g}]}])}()}(angular);