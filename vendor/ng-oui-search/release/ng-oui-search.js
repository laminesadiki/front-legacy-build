/**
 * ng-oui-search - v4.0.0 - 2014-11-05
 *
 * Copyright (c) 2014 Oodrive
 */
!function(a){!function(){a.module("oui.search.field",["oui.search.input","oui.focus","oui-templates-search"]).directive("ouiSearchField",function(){return{restrict:"AE",transclude:!0,scope:{model:"=?ngModel",ouiPlaceholder:"@",searchIcoClick:"&",emptyClearIcoClick:"&",ngKeyup:"&"},controller:["$scope","$element","$attrs",function(a,b,c){a.getPlaceholder=function(){return c.ouiPlaceholder?a.ouiPlaceholder:""},a.isSearchValue=function(){return!!a.model};var d=2,e=function(){if(f=f||b.find(".oo-search-results"),f&&f.is(":visible")){var a=parseFloat(f.css("font-size"),10),c=f.offset().top,e=$(window).height(),g=e-c;g/=a;var h=g-d;f.css("max-height",h+"em")}},f=null;a.$watch(function(){return f=f||b.find(".oo-search-results"),f&&f.is(":visible")},e),b.on("focus","input,textarea,select,[tabindex]",e);var g,h=function(){clearTimeout(g),g=setTimeout(e,100)};$(window).on("resize.searchField",h);var i=a.$on("$destroy",function(){$(window).off("resize.searchField",h),i()})}],replace:!0,templateUrl:"oui-search/field/searchField.tpl.html"}})}(),function(){var b=1;a.module("oui.search.input",["oo.i18n","oui-templates-search"]).directive("ouiSearchInput",function(){return{restrict:"AE",scope:{model:"=?ngModel",placeholder:"@ouiPlaceholder",searchIcoClick:"&",emptyClearIcoClick:"&",ngKeyup:"&"},controller:["$scope",function(a){a.fieldId="searchInput_"+b++,a.getPlaceholder=function(){return a.placeholder||"i18n:common.search"},a.onClear=function(){a.model?a.model="":a.emptyClearIcoClick()}}],templateUrl:"oui-search/input/searchInput.tpl.html"}})}(),function(){a.module("oui.search.list",["oo.i18n","oui.services.loadingImg","oui-templates-search"]).directive("ouiSearchList",function(){return{restrict:"AE",transclude:!0,scope:{title:"@ouiTitle",total:"=?",listController:"=?",refineNeeded:"=?",collapsed:"=?",showAll:"&"},controller:["$scope","$element","$attrs","$loadingImg","$filter",function(a,b,c,d,e){var f="undefined"!=typeof c.ouiTitle,g="undefined"!=typeof c.showAll;a.isShowAllButtonDisplayed=function(){return!a.refineNeeded&&g&&a.listController&&a.listController.isDataDisplayed(!0)},a.isLoadingDisplayed=function(){return a.listController&&a.listController.isLoadingDisplayed(!0)},a.isEmptyDisplayed=function(){return a.listController&&a.listController.isEmptyDisplayed(!0)},a.isNoData=function(){return a.refineNeeded||a.isLoadingDisplayed()||a.isEmptyDisplayed()},a.getNoDataMsg=function(){return a.refineNeeded?"oui.search.list.refine":a.isLoadingDisplayed()?"oui.search.list.loading":"oui.search.list.empty"},a.getTitle=function(){return e("i18nOrText")(a.title)+(a.isLoadingDisplayed()||!a.total||a.refineNeeded?"":" ("+a.total+")")},a.getShowAllLabel=function(){return e("i18n")(a.total?"oui.search.list.showall_cpt":"oui.search.list.showall",[a.total])},a.hasHeader=function(){return f},a.switchCollapse=function(){a.collapsed=!a.collapsed},a.loadingImgPath=d.path("white",16),a.onShowAll=function(){b.blur(),a.showAll()}}],templateUrl:"oui-search/list/searchList.tpl.html"}})}(),function(){a.module("oui.search",["oui.search.input","oui.search.field","oui.search.list"])}(),function(a){a.module("oui-templates-search",["oui-search/field/searchField.tpl.html","oui-search/input/searchInput.tpl.html","oui-search/list/searchList.tpl.html"]),a.module("oui-search/field/searchField.tpl.html",[]).run(["$templateCache",function(a){a.put("oui-search/field/searchField.tpl.html",'<div class="oo-search-simple" tabindex="-1">\n	<div oui-search-input oui-placeholder="{{getPlaceholder()}}"\n		search-ico-click="searchIcoClick()"\n		empty-clear-ico-click="emptyClearIcoClick()"\n		ng-keyup="ngKeyup"\n		ng-model="model"></div>\n	<div ng-show="isSearchValue()" class="oo-search-results" tabindex="-1" ng-transclude>\n	</div>\n</div>')}]),a.module("oui-search/input/searchInput.tpl.html",[]).run(["$templateCache",function(a){a.put("oui-search/input/searchInput.tpl.html",'<div class="oo-search-input">\n	<div class="oo-search-input-inner">\n		<input placeholder="{{getPlaceholder() | i18nOrText}}" id="{{fieldId}}" ng-model="model" ng-keyup="ngKeyup">\n	</div>\n	<label for="{{fieldId}}"><i class="oo-icon icon-loupe" ng-click="searchIcoClick()"></i></label>\n	<i class="icon-close" ng-click="onClear()"></i>\n</div>')}]),a.module("oui-search/list/searchList.tpl.html",[]).run(["$templateCache",function(a){a.put("oui-search/list/searchList.tpl.html","<div class=\"oo-search-list\"\n	ng-class=\"{'oo-search-list-with-show-all':isShowAllButtonDisplayed(),'oo-search-list-with-header':hasHeader(),'oo-collapsed':collapsed,'oo-no-data':isNoData(),'oo-loading':isLoadingDisplayed()}\">\n"+'	<div class="oo-search-list-header" ng-click="switchCollapse()">\n		<span class="oo-title">{{getTitle()}}</span>\n		<img class="oo-loading" ng-src="{{loadingImgPath}}"/>\n		<i class="oo-collapse-icon"></i>\n	</div>\n	<div class="oo-search-list-inner">\n		<div class="oo-search-list-no-data">\n			{{getNoDataMsg() | i18n}}\n		</div>\n		<div class="oo-search-list-content" ng-transclude>\n		</div>\n		<div class="oo-search-showall-button">\n			<button ng-click="onShowAll()">{{getShowAllLabel()}}</button>\n		</div>\n	</div>\n</div>')}])}(a)}(angular);