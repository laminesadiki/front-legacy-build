/**
 * ng-oo-router - v3.0.0 - 2014-11-05
 *
 * Copyright (c) 2014 Oodrive
 */
!function(a){!function(){a.module("oo.router",[]).provider("$ooRouter",function(){var b=!1,c=[],d=[],e=function(c){return a.isDefined(c)?void(b=c):b};this.locationChange=e,this.globals=function(b){return a.isDefined(b)?void(c=b):c},this.basicnav=function(b){return a.isDefined(b)?void(d=b):d};var f=[];this.addParams=function(a,b){var c={nav:a,params:b};f.push(c)},this.clearParams=function(){f=[]};var g={};this.$get=["$rootScope","$location",function(h,i){var j=[],k=function(){for(var b="/",c=a.copy(g),d=1;c["@"+d];++d)b+=c["@"+d]+"/",delete c["@"+d];return{url:b,query:c}},l=function(b){var d,e=k();i.path(e.url);var f=e.query||{},g={};for(d=0;d<c.length;++d)i.search()[c[d]]&&(g[c[d]]=i.search()[c[d]]);i.search(a.extend(g,f)),b&&i.replace()},m=function(a){var b=!0;for(var c in a.nav)if(g[c]!==a.nav[c]&&"*"!==a.nav[c]){b=!1;break}return b},n=function(a,b){var c,d=null,e=m(a);if(e){var f=!1;if(b){var h=!0;for(d in a.nav)if(b[d]!==a.nav[d]){h=!1;break}f=!h}if(f&&a.conserve&&a.lastParams){for(d in a.lastParams)g[d]=a.lastParams[d];l(!0)}var i={};for(c=0;c<a.params.length;++c)g[a.params[c]]&&(i[a.params[c]]=g[a.params[c]]);a.lastParams=i,a.callback(i)}},o=function(a){var b,c,e=null;for(c=0;c<d.length;++c){var f=!1;for(b=d[c].length-1;b>=0&&a[d[c][b]];--b)f=!0;0>b&&f&&(!e||e.length<d[c].length)&&(e=d[c])}return e};return{locationChange:e,addCallback:function(a,b,c,d,e){!a||"$$watchers"in a||(e=d,d=c,c=b,b=a,a=null);var f={nav:b,params:c,callback:d,conserve:e};j.push(f),n(f);var g=function(){var a=j.indexOf(f);-1!==a&&j.splice(a,1)};return a?void a.$on("$destroy",function(){g()}):g},getFromLocation:function(){var b,d=a.copy(i.search());if(i.path()&&"/"!==i.path()){var e=i.path().split("/");for(b=1;b<e.length&&e[b];++b)d["@"+b]=e[b]}for(b=0;b<c.length;++b)delete d[c[b]];return d},goTo:function(c,e,i,k){c=c||{};var p,q,r=null,s=g;g=a.copy(c);for(r in g)g[r]="undefined"==typeof g[r]||null===g[r]?g[r]:g[r]+"","="===g[r]&&(g[r]=s[r]);if(!k)for(p=0;p<f.length;++p){var t=f[p];if(m(t))for(q=0;q<t.params.length;++q)"undefined"==typeof g[t.params[q]]&&s[t.params[q]]&&(g[t.params[q]]=s[t.params[q]])}for(r in g)g[r]||delete g[r];if(!a.equals(s,g)){var u=o(g);if(u)for(r in g)for(q=0;q<d.length;++q)-1!==d[q].indexOf(r)&&-1===u.indexOf(r)&&delete g[r];if(h.$broadcast("$routerNavChange",g)){for(p=0;p<j.length;++p)n(j[p],s);b&&i!==!1&&l(e)}}},getHomeUrl:function(a){a=a||window.location;var b,d={};for(b=0;b<c.length;++b)i.search()[c[b]]&&(d[c[b]]=i.search()[c[b]]);if(a.hash){var e=a.hash.replace(/^(#?!?).*$/,"$1"),f=[];for(var g in d)f.push(encodeURI(g)+"="+encodeURI(d[g]));return f=f.length?"?"+f.join("&"):"",window.location.origin+window.location.pathname+e+"/"+f}return window.location.origin+window.location.pathname},getNav:function(){return g}}}]}).run(["$rootScope","$ooRouter",function(a,b){a.$on("$locationChangeSuccess",function(){b.locationChange()&&b.goTo(b.getFromLocation(),!1,!1,!0)})}])}()}(angular);